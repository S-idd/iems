# Test Profile Configuration
spring.datasource.url=jdbc:tc:postgresql:17:///testdb?user=testuser&password=testpass
spring.datasource.driver-class-name=org.testcontainers.jdbc.ContainerDatabaseDriver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Flyway
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# Redis (in-memory for tests)
spring.cache.type=simple

# Kafka (Embedded Kafka for KafkaIntegrationTest)
spring.kafka.bootstrap-servers=${spring.embedded.kafka.brokers}
spring.kafka.consumer.group-id=test-consumer-group
spring.kafka.consumer.auto-offset-reset=earliest

# RabbitMQ (Testcontainers)
spring.rabbitmq.dynamic=true
spring.rabbitmq.host=${embedded.rabbitmq.host}
spring.rabbitmq.port=${embedded.rabbitmq.port}
spring.rabbitmq.username=${embedded.rabbitmq.username}
spring.rabbitmq.password=${embedded.rabbitmq.password}

# JWT
app.jwt.secret=5f71b34b6dfa8e8c53a3e41277e39f94bee5812e5a78fa0493f60916c81671ac
app.jwt.expiration=60000
app.jwt.refresh-expiration=120000

# Logging
logging.level.com.iems=DEBUG
logging.level.org.springframework.test=INFO
logging.level.org.testcontainers=INFO

# Disable mail
app.notification.email.enabled=false
spring.mail.host=localhost
spring.mail.port=25

# Test settings
app.dev.init-sample-data=false
app.dev.enable-test-endpoints=true

# Actuator
management.endpoints.web.exposure.include=health,info,prometheus
management.metrics.export.prometheus.enabled=true

# OpenAPI
springdoc.swagger-ui.enabled=false
springdoc.api-docs.enabled=false

# Tracing
management.tracing.sampling.probability=0.0

# Test timeouts
spring.test.database.replace=none